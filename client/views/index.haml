!!! 5
%html
  %head
    %title Serious Business
    %link{:href => '/css/site.css', :media => 'screen', :rel => 'stylesheet', :type => 'text/css'}
    %script{:src => '/js/d3.min.js', :type => 'text/javascript'}

    :javascript
      var data = [4, 8, 15, 16, 23, 42];

  %body


    :javascript
        // Create the chart
        var chart = d3.select("body")
          .append("svg:svg")
            .attr("class", "chart")
            .attr('width', 420)
            .attr('height', 140)
          .append("svg:g")
            .attr("transform", "translate(10,15)");




        // Create chart scale
        var x_scale = d3.scale.linear()
          .domain([0, d3.max(data)])
          .range([0, 420]);
        var y_scale = d3.scale.ordinal()
          .domain(data)
          .rangeBands([0, 120]);

        // Rulers
        chart.selectAll("line")
          .data(x_scale.ticks(10))
          .enter().append("svg:line")
            .attr("x1", x_scale)
            .attr("x2", x_scale)
            .attr("y1", 0)
            .attr("y2", 120)
            .attr("stroke", "#ccc");

        chart.selectAll("text.rule")
          .data(x_scale.ticks(10))
          .enter().append("svg:text")
            .attr("class", "rule")
            .attr("x", x_scale)
            .attr("y", 0)
            .attr("dy", -3)
            .attr("text-anchor", "middle")
            .text(String);

        // Create data
        chart.selectAll("rect")
          .data(data)
          .enter().append("svg:rect")
            .attr("y", y_scale)
            .attr("width", x_scale)
            .attr("height", y_scale.rangeBand());
        chart.selectAll("text")
          .data(data)
          .enter().append("svg:text")
            .attr("x", x_scale)
            .attr("y", function(d) { return y_scale(d) + y_scale.rangeBand() / 2; })
            .attr("dx", -3) // padding-right
            .attr("dy", ".35em") // vertical-align: middle
            .attr("text-anchor", "end") // text-align: right
            .text(String);

        chart.append("svg:line")
          .attr("y1", 0)
          .attr("y2", 120)
          .attr("stroke", "#000");


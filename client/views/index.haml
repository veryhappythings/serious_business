!!! 5
%html
  %head
    %title Serious Business
    %link{:href => '/css/site.css', :media => 'screen', :rel => 'stylesheet', :type => 'text/css'}
    %script{:src => '/js/jquery-1.5.1.min.js', :type => 'text/javascript'}
    %script{:src => '/js/raphael-min.js', :type => 'text/javascript'}
    %script{:src => '/js/g.raphael-min.js', :type => 'text/javascript'}
    %script{:src => '/js/g.bar-min.js', :type => 'text/javascript'}
    :javascript
      $(document).ready(function() {
        sensors = #{@sensors};
        $.each(sensors, function(i) {
          console.log(i);
          console.log(sensors[i]);

          var chart = $('<div id="'+i+'">').appendTo('body');
          console.log(chart);
          var r = Raphael(i, 640, 480);
          r.g.txtattr.font = "12px 'Fontin Sans', Fontin-Sans, sans-serif";
          r.g.text(200, 10, i).attr({"font-size": 20});
          chart = r.g.barchart(10, 10, 300, 220, sensors[i], 0, {type: "sharp"});
          chart.label(sensors[i], true);
        });
      });

  %body
    %h2
      Here's a graph:
    #graph
    %p=@sensors
